<html>
    <head>
       <meta charset="UTF-8" />
       <meta name="viewport" content="width=device-width, initial-scale=1"> <!— CSS —>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"> <!— JS —>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</head>
    </head>
    <body >
      
        <div id="loginform" style="display:block;">
            로그인: 
            <input type="text" id="userId" placeholder="User ID">
            <input type="password" id="userPw" placeholder="Password">
            <input type="button" onclick="login()" value="로그인">
            <input type="button" onclick="logout()" value="로그아웃">
        </div>

        <h1>선수명단 리스트 </h1>
        <p>
            <input type="button" value="선수 추가" onclick="location.href='/player/add'">
        </p>
        <% players.forEach(function(item) { %>
            <table class="table table-striped">
                  <thead><tr>
                     <th>id</th>
                     <th>player</th>
                     <th>team</th>
                     <th>age</th>
                     <th>nickname</th>
                  </tr></thead>
                  <tbody>
                     <tr>
                        <td><h3><a href='/players/<%= item.id %>'>ID : <%= item.id %></a></h3></td>
                        <td><%= item.player %></td>
                        <td><%= item.team %></td>
                        <td><%= item.age %></td>
                        <td><%= item.nickname %></td>
                     </tr>
                  </tbody>
        <!-- <h3><a href='/players/<%= item.id %>'>ID : <%= item.id %></a></h3>
        <ul>
            <li>player : <%= item.player %>  </li>
            <li>team : <%= item.team %>  </li>
            <li>age : <%= item.age %>  </li>
            <li>nickname : <%= item.nickname %>  </li>
        </ul> -->
        </table>
        <% }) %>





        <script>
            $(document).ready(function () {
               console.log('ready!');
            });
            function login() {
               var id = $("#userId").val();
               var pw = $("#userPw").val();
               $.ajax({
                  url: '/MloginChk',
                  type: 'post',
                  data: `id=${id}&password=${pw}`
               }).done((data) => {
                  // 로그인 성공
                  alert('로그인 성공');
                  $("#login-result").text(data);
                  $("#tagID").show(); 
                  $("#tag_sub").hide();  
               }).fail((err) => {
                  // 로그인 실패            
                  alert('로그인 실패');
                  $("#login-result").text(err.statusText);
               });
            }
            function login_sub() {
               var id = $("#userId").val();
               var pw = $("#userPw").val();
               $.ajax({
                  url: '/MloginChk',
                  type: 'post',
                  data: `id=${id}&password=${pw}`
               }).done((data) => {
                  // 로그인 성공
                  alert('로그인 성공');
                  $("#login-result").text(data);
                  $("#tagID").show();
               }).fail((err) => {
                  // 로그인 실패            
                  alert('로그인 후 음식 추가 가능합니다.');
                  $("#loginform").show();  
                  $("#login-result").text(err.statusText);
               });
            }
            function logout() {
               $.ajax({
                  url: '/MlogoutChk',
                  type: 'delete'
               }).done((data) => {
                  // 로그아웃 성공
                  $("#login-result").text("로그아웃 성공");  
               }).fail((err) => {
                  // 로그아웃 실패            
                  $("#login-result").text("로그아웃 실패");
               });
            }
              
            </script>
            <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
    </html>